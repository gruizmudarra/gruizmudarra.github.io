---
import type { CollectionEntry } from "astro:content";
import BaseLayout from "./BaseLayout.astro";
import FormattedDate from "../components/FormattedDate.astro";
import { Image } from "astro:assets";

type Props = CollectionEntry<"blog">["data"];

const { title, description, pubDate, updatedDate, heroImage } = Astro.props;
---

<BaseLayout title={title} description={description} fullWidth>
	<!-- Article Header -->
	<section class="bg-gradient-to-b from-black via-black to-gray-dark/80 px-4 pt-28 pb-16 md:pt-32 md:pb-20">
		<div class="max-w-3xl mx-auto">
			<a
				href="/blog"
				class="inline-flex items-center gap-1 text-sm text-white/60 no-underline hover:text-white transition-colors duration-200 mb-8"
			>
				&larr; Blog
			</a>

			{
				pubDate && (
					<div class="text-sm text-white/60 mb-4">
						<FormattedDate date={pubDate} />
						{updatedDate && (
							<span class="italic ml-2">
								&middot; Actualizado el <FormattedDate date={updatedDate} />
							</span>
						)}
					</div>
				)
			}

			<h1 class="text-3xl md:text-4xl lg:text-5xl text-white leading-tight mb-4">
				{title}
			</h1>

			{
				description && (
					<p class="text-base md:text-lg text-white/70 leading-relaxed m-0 max-w-2xl">
						{description}
					</p>
				)
			}
		</div>
	</section>

	<!-- Hero Image -->
	{
		heroImage && (
			<div class="max-w-4xl mx-auto px-4 -mt-8 relative z-10">
				<Image
					width={1020}
					height={510}
					src={heroImage}
					alt={title}
					class="block w-full rounded-xl shadow-[var(--box-shadow)]"
				/>
			</div>
		)
	}

	<!-- Article Content -->
	<article class="max-w-3xl mx-auto px-4 py-12 md:py-16 text-gray-dark">
		<slot />
	</article>

	<!-- Back to Blog -->
	<div class="max-w-3xl mx-auto px-4 pb-16 text-center">
		<a
			href="/blog"
			class="inline-flex items-center gap-2 text-base font-semibold
				text-accent no-underline
				transition-all duration-300
				hover:text-accent-secondary hover:gap-3"
		>
			&larr; Volver al blog
		</a>
	</div>
</BaseLayout>
