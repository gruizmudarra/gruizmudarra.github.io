---
export interface Props {
	delay?: string;
	class?: string;
}

const { delay, class: className } = Astro.props;
---

<div
	class:list={["reveal", className]}
	style={delay ? `--reveal-delay: ${delay}` : undefined}
>
	<slot />
</div>

<script>
	const observer = new IntersectionObserver(
		(entries) => {
			entries.forEach((entry) => {
				if (entry.isIntersecting) {
					entry.target.classList.add("revealed");
					observer.unobserve(entry.target);
				}
			});
		},
		{ threshold: 0.15 },
	);
	document
		.querySelectorAll(".reveal, .reveal-left, .reveal-right")
		.forEach((el) => observer.observe(el));
</script>
