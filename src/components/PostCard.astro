---
import type { CollectionEntry } from "astro:content";
import FormattedDate from "./FormattedDate.astro";
import { Image } from "astro:assets";

interface Props {
    post: CollectionEntry<"blog">;
    class?: string;
    showPinnedLabel?: boolean;
}

const { post, class: className, showPinnedLabel = true } = Astro.props;
---

<li class:list={[className, "text-center h-full"]}>
    <a
        href={`/blog/${post.id}/`}
        class="block transition-all duration-200 ease-in-out group h-full flex flex-col"
    >
        {
            post.data.heroImage && (
                <div class="relative aspect-video overflow-hidden rounded-xl">
                    <Image
                        width={1024}
                        height={512}
                        src={post.data.heroImage}
                        alt=""
                        class="w-full h-full object-cover transition-transform duration-300"
                    />
                    {showPinnedLabel && post.data.pinned && (
                        <span class="absolute top-2 right-2 bg-blue-100 text-blue-800 text-sm font-medium px-2.5 py-0.5 rounded">
                            Destacado
                        </span>
                    )}
                </div>
            )
        }
        <div class="flex-grow flex flex-col justify-between px-6 pb-6 pt-2">
            <h4
                class={`m-0 text-[var(--black)] leading-tight group-hover:!text-[var(--accent)] transition-colors duration-200`}
                style="height: 3em;"
            >
                <span class="line-clamp-2">
                    {post.data.title}
                </span>
            </h4>
            <p
                class="m-0 text-sm text-[rgb(var(--gray))] group-hover:text-[var(--accent)] transition-colors duration-200 whitespace-nowrap overflow-hidden text-ellipsis"
            >
                {
                    post.data.pubDate && (
                        <FormattedDate date={post.data.pubDate} />
                    )
                }
            </p>
        </div>
    </a>
</li>
